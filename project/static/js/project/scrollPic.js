define(["jquery"],function($){function ScrollPic(t,i,s,h,e){this.$=function(t){return"string"==typeof t?document.getElementById(t):t},this.scrollContId=t,this.arrLeftId=i,this.arrRightId=s,this.dotListId=h,this.listType=e,this.dotClassName="dotItem",this.dotOnClassName="dotItemOn",this.dotObjArr=[],this.listEvent="onclick",this.circularly=!0,this.pageWidth=0,this.frameWidth=0,this.speed=10,this.space=10,this.upright=!1,this.pageIndex=0,this.autoPlay=!0,this.autoPlayTime=5,this._autoTimeObj,this._scrollTimeObj,this._state="ready",this.stripDiv=document.createElement("DIV"),this.lDiv01=document.createElement("DIV"),this.lDiv02=document.createElement("DIV")}return ScrollPic.prototype={version:"1.44",author:"mengjia",pageLength:0,touch:!0,scrollLeft:0,eof:!1,bof:!0,initialize:function(){var t=this;if(!this.scrollContId)throw new Error("必须指定scrollContId.");if(this.scDiv=this.$(this.scrollContId),!this.scDiv)throw new Error('scrollContId不是正确的对象.(scrollContId = "'+this.scrollContId+'")');this.scDiv.style[this.upright?"height":"width"]=this.frameWidth+"px",this.scDiv.style.overflow="hidden",this.lDiv01.innerHTML=this.scDiv.innerHTML,this.scDiv.innerHTML="",this.scDiv.appendChild(this.stripDiv),this.stripDiv.appendChild(this.lDiv01),this.circularly&&(this.stripDiv.appendChild(this.lDiv02),this.lDiv02.innerHTML=this.lDiv01.innerHTML,this.bof=!1,this.eof=!1),this.stripDiv.style.overflow="hidden",this.stripDiv.style.zoom="1",this.stripDiv.style[this.upright?"height":"width"]="32766px",this.lDiv01.style.overflow="hidden",this.lDiv01.style.zoom="1",this.lDiv02.style.overflow="hidden",this.lDiv02.style.zoom="1",this.upright||(this.lDiv01.style.cssFloat="left",this.lDiv01.style.styleFloat="left"),this.lDiv01.style.zoom="1",this.circularly&&!this.upright&&(this.lDiv02.style.cssFloat="left",this.lDiv02.style.styleFloat="left"),this.lDiv02.style.zoom="1",this.addEvent(this.scDiv,"mouseover",function(){t.stop()}),this.addEvent(this.scDiv,"mouseout",function(){t.play()}),this.arrLeftId&&(this.alObj=this.$(this.arrLeftId),this.alObj&&(this.addEvent(this.alObj,"mousedown",function(i){t.rightMouseDown(),i=i||event,t.preventDefault(i)}),this.addEvent(this.alObj,"mouseup",function(){t.rightEnd()}),this.addEvent(this.alObj,"mouseout",function(){t.rightEnd()}))),this.arrRightId&&(this.arObj=this.$(this.arrRightId),this.arObj&&(this.addEvent(this.arObj,"mousedown",function(i){t.leftMouseDown(),i=i||event,t.preventDefault(i)}),this.addEvent(this.arObj,"mouseup",function(){t.leftEnd()}),this.addEvent(this.arObj,"mouseout",function(){t.leftEnd()})));var i,s,h=Math.ceil(this.lDiv01[this.upright?"offsetHeight":"offsetWidth"]/this.frameWidth);if(this.pageLength=h,this.dotListId&&(this.dotListObj=this.$(this.dotListId),this.dotListObj.innerHTML="",this.dotListObj))for(i=0;h>i;i++)s=document.createElement("span"),this.dotListObj.appendChild(s),this.dotObjArr.push(s),i==this.pageIndex?s.className=this.dotOnClassName:s.className=this.dotClassName,"number"==this.listType?s.innerHTML=i+1:"string"==typeof this.listType?s.innerHTML=this.listType:s.innerHTML="",s.title="第"+(i+1)+"页",s.num=i,s[this.listEvent]=function(){t.pageTo(this.num)};this.scDiv[this.upright?"scrollTop":"scrollLeft"]=0,this.autoPlay&&this.play(),this._scroll=this.upright?"scrollTop":"scrollLeft",this._sWidth=this.upright?"scrollHeight":"scrollWidth","function"==typeof this.onpagechange&&this.onpagechange(),this.iPad()},leftMouseDown:function(){if("ready"==this._state){var t=this;this._state="floating",clearInterval(this._scrollTimeObj),this._scrollTimeObj=setInterval(function(){t.moveLeft()},this.speed),this.moveLeft()}},rightMouseDown:function(){if("ready"==this._state){var t=this;this._state="floating",clearInterval(this._scrollTimeObj),this._scrollTimeObj=setInterval(function(){t.moveRight()},this.speed),this.moveRight()}},moveLeft:function(){"floating"==this._state&&(this.circularly?this.scDiv[this._scroll]+this.space>=this.lDiv01[this._sWidth]?this.scDiv[this._scroll]=this.scDiv[this._scroll]+this.space-this.lDiv01[this._sWidth]:this.scDiv[this._scroll]+=this.space:this.scDiv[this._scroll]+this.space>=this.lDiv01[this._sWidth]-this.frameWidth?(this.scDiv[this._scroll]=this.lDiv01[this._sWidth]-this.frameWidth,this.leftEnd()):this.scDiv[this._scroll]+=this.space,this.accountPageIndex())},moveRight:function(){"floating"==this._state&&(this.circularly?this.scDiv[this._scroll]-this.space<=0?this.scDiv[this._scroll]=this.lDiv01[this._sWidth]+this.scDiv[this._scroll]-this.space:this.scDiv[this._scroll]-=this.space:this.scDiv[this._scroll]-this.space<=0?(this.scDiv[this._scroll]=0,this.rightEnd()):this.scDiv[this._scroll]-=this.space,this.accountPageIndex())},leftEnd:function(){if("floating"==this._state||"touch"==this._state){this._state="stoping",clearInterval(this._scrollTimeObj);var t=this.pageWidth-this.scDiv[this._scroll]%this.pageWidth;this.move(t)}},rightEnd:function(){if("floating"==this._state||"touch"==this._state){this._state="stoping",clearInterval(this._scrollTimeObj);var t=-this.scDiv[this._scroll]%this.pageWidth;this.move(t)}},move:function(t,i){var s=this,h=t/5,e=!1;i||(h>this.space&&(h=this.space),h<-this.space&&(h=-this.space)),h=Math.abs(h)<1&&0!=h?h>=0?1:-1:Math.round(h);this.scDiv[this._scroll]+h;return h>0?this.circularly?this.scDiv[this._scroll]+h>=this.lDiv01[this._sWidth]?this.scDiv[this._scroll]=this.scDiv[this._scroll]+h-this.lDiv01[this._sWidth]:this.scDiv[this._scroll]+=h:this.scDiv[this._scroll]+h>=this.lDiv01[this._sWidth]-this.frameWidth?(this.scDiv[this._scroll]=this.lDiv01[this._sWidth]-this.frameWidth,this._state="ready",e=!0):this.scDiv[this._scroll]+=h:this.circularly?this.scDiv[this._scroll]+h<0?this.scDiv[this._scroll]=this.lDiv01[this._sWidth]+this.scDiv[this._scroll]+h:this.scDiv[this._scroll]+=h:this.scDiv[this._scroll]+h<=0?(this.scDiv[this._scroll]=0,this._state="ready",e=!0):this.scDiv[this._scroll]+=h,e?void this.accountPageIndex():(t-=h,0==Math.abs(t)?(this._state="ready",this.autoPlay&&this.play(),void this.accountPageIndex()):(clearTimeout(this._scrollTimeObj),void(this._scrollTimeObj=setTimeout(function(){s.move(t,i)},this.speed))))},pre:function(){"ready"==this._state&&(this._state="stoping",this.move(-this.pageWidth))},next:function(t){"ready"==this._state&&(this._state="stoping",this.circularly?this.move(this.pageWidth):this.scDiv[this._scroll]>=this.lDiv01[this._sWidth]-this.frameWidth?(this._state="ready",t&&this.pageTo(0)):this.move(this.pageWidth))},play:function(){var t=this;this.autoPlay&&(clearInterval(this._autoTimeObj),this._autoTimeObj=setInterval(function(){t.next(!0)},1e3*this.autoPlayTime))},stop:function(){clearInterval(this._autoTimeObj)},pageTo:function(t){if(this.pageIndex!=t){0>t&&(t=this.pageLength-1),clearTimeout(this._scrollTimeObj),clearInterval(this._scrollTimeObj),this._state="stoping";var i=t*this.frameWidth-this.scDiv[this._scroll];this.move(i,!0)}},accountPageIndex:function(){var t=Math.round(this.scDiv[this._scroll]/this.frameWidth);t>=this.pageLength&&(t=0),this.scrollLeft=this.scDiv[this._scroll];var i=this.lDiv01[this._sWidth]-this.frameWidth;if(this.circularly||(this.eof=this.scrollLeft>=i,this.bof=this.scrollLeft<=0),"function"==typeof this.onmove&&this.onmove(),t!=this.pageIndex){this.pageIndex=t,this.pageIndex>Math.floor(this.lDiv01[this.upright?"offsetHeight":"offsetWidth"]/this.frameWidth)&&(this.pageIndex=0);var s;for(s=0;s<this.dotObjArr.length;s++)s==this.pageIndex?this.dotObjArr[s].className=this.dotOnClassName:this.dotObjArr[s].className=this.dotClassName;"function"==typeof this.onpagechange&&this.onpagechange()}},iPadX:0,iPadLastX:0,iPadStatus:"ok",iPad:function(){if("undefined"!=typeof window.ontouchstart&&this.touch){var t=this;this.addEvent(this.scDiv,"touchstart",function(i){t._touchstart(i)}),this.addEvent(this.scDiv,"touchmove",function(i){t._touchmove(i)}),this.addEvent(this.scDiv,"touchend",function(i){t._touchend(i)})}},_touchstart:function(t){this.stop(),this.iPadX=t.touches[0].pageX,this.iPadScrollX=window.pageXOffset,this.iPadScrollY=window.pageYOffset,this.scDivScrollLeft=this.scDiv[this._scroll]},_touchmove:function(t){t.touches.length>1&&this._touchend(),this.iPadLastX=t.touches[0].pageX;var i=this.iPadX-this.iPadLastX;if("ok"==this.iPadStatus){if(!(this.iPadScrollY==window.pageYOffset&&this.iPadScrollX==window.pageXOffset&&Math.abs(i)>20))return;this.iPadStatus="touch"}this._state="touch";var s=this.scDivScrollLeft+i;if(s>=this.lDiv01[this._sWidth]){if(!this.circularly)return;s-=this.lDiv01[this._sWidth]}if(0>s){if(!this.circularly)return;s+=this.lDiv01[this._sWidth]}this.scDiv[this._scroll]=s,t.preventDefault()},_touchend:function(t){if("touch"==this.iPadStatus){this.iPadStatus="ok";var i=this.iPadX-this.iPadLastX;0>i?this.rightEnd():this.leftEnd(),this.play()}},_overTouch:function(){this.iPadStatus="ok"},$:function(objName){return document.getElementById?eval('document.getElementById("'+objName+'")'):eval("document.all."+objName)},isIE:-1!=navigator.appVersion.indexOf("MSIE")?!0:!1,addEvent:function(t,i,s){t.attachEvent?t.attachEvent("on"+i,s):t.addEventListener(i,s,!1)},delEvent:function(t,i,s){t.detachEvent?t.detachEvent("on"+i,s):t.removeEventListener(i,s,!1)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},ScrollPic});